<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 
	NO     NOT NULL NUMBER        
	TITLE           VARCHAR2(300) 
	POSTER          VARCHAR2(400) 
	PRICE           NUMBER        
	STOCK           VARCHAR2(20)     
 -->
<mapper namespace="com.sist.mapper.goods-mapper">
  <!-- goods 목록 -->
  <select id="goodsListData" resultType="GoodsVO" parameterType="hashmap">
    SELECT no,title,poster,price,stock,num
    FROM (SELECT no,title,poster,price,stock,rownum as num
    FROM (SELECT /*+ INDEX_ASC(goods_list gl_no_pk) */ no,title,poster,price,stock
    FROM goods_list))
    WHERE num BETWEEN #{start} AND #{end}
  </select>
  <!-- goods 총페이지 -->
  <select id="goodsTotalPage" resultType="int">
    SELECT CEIL(COUNT(*)/9.0) FROM goods_list
  </select>
  <!-- goods 상세데이터 -->
  <!-- 
	    NO               NUMBER        
		TITLE            VARCHAR2(300) 
		POSTER           VARCHAR2(400) 
		PRICE            NUMBER        
		DETAIL_POSTER    CLOB          
   -->
  <select id="goodsDetailData" resultType="GoodsDetailVO" parameterType="int">
    SELECT gl.no,gd.title,gd.poster,gd.price,gd.detail_poster 
    FROM goods_detail gd,goods_list gl
    WHERE gd.no=gl.no 
      AND gd.no=#{no}
  </select>
</mapper>